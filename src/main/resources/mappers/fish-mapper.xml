<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https:/mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="fishMapper">
	<resultMap type="Fish" id="fishResult">
 		<result column="FISH_NO" property="fishNo" />
 		<result column="FISH_NAME" property="fishName" />
 		<result column="FISH_CONTENT" property="fishContent" />
 		<result column="FISH_COUNT" property="fishCount" />
 		<result column="FISH_STATUS" property="fishStatus" />
 		<result column="FISH_TYPE" property="fishType" />
 		<result column="FISH_TITLE_IMAGE" property="fishTitleImage" />
 	</resultMap>
 	
 	<resultMap type="Attachment" id="AttachmentResult">
		<result column="FILE_NO" property="fileNo" />
		<result column="ORIGIN_NAME" property="originName" />
		<result column="CHANGE_NAME" property="changeName" />
		<result column="FILE_PATH" property="filePath" />
		<result column="UPLOAD_DATE" property="uploadDate" />
		<result column="FILE_LEVEL" property="fileLevel" />
		<result column="FILE_STATUS" property="fileStatus" />
		<result column="RFISH_NO" property="rfishNo" />
		<result column="RPRODUCT_NO" property="rproductNo" />
		<result column="RFISHING_NO" property="rfishingNo" />
		<result column="RSTORE_NO" property="rstoreNo" />
	</resultMap>
 	
 	<select id="selectFreshListCount" resultType="_int">
 		SELECT COUNT (*)
 			FROM FISH
 			WHERE FISH_TYPE= 'FRESH'
 			AND FISH_STATUS= 'Y'
 	</select>
 	
 	<select id="selectFreshList" resultMap="fishResult">
 		SELECT *
 			FROM FISH
 			WHERE FISH_TYPE = 'FRESH'
 			AND FISH_STATUS= 'Y'
 			ORDER BY FISH_NO ASC
 	</select>
 	
 	<select id="selectSeaListCount" resultType="_int">
 		SELECT COUNT (*)
 			FROM FISH
 			WHERE FISH_TYPE= 'SEA'
 			AND FISH_STATUS= 'Y'
 	</select>
 	
 	<select id="selectSeaList" resultMap="fishResult">
 		SELECT *
 			FROM FISH
 			WHERE FISH_TYPE = 'SEA'
 			AND FISH_STATUS= 'Y'
 			ORDER BY FISH_NO ASC
 	</select>
 	
	<insert id="insertFishInfo">
		INSERT INTO FISH (
							FISH_NO,
							FISH_NAME,
							FISH_CONTENT,
							FISH_TYPE
		)
		VALUES (
							SEQ_FISH_NO.NEXTVAL,
							#{fishName},
							#{fishContent},
							#{fishType}
		)
	</insert>
	
	<update id="increaseCount">
 		UPDATE FISH
 		   SET FISH_COUNT = FISH_COUNT + 1
 		 WHERE FISH_NO = #{fishNo}
 		   AND FISH_STATUS = 'Y'
 	</update>
 	
 	<select id="selectFish" resultMap="fishResult">
 		SELECT *
 		  FROM FISH
 		 WHERE FISH_STATUS = 'Y'
 		   AND FISH_NO = #{fishNo}
 	</select>
 	
	<update id="updateFish">
 		UPDATE FISH
 		   SET FISH_NAME = #{fishName},
 		   	   FISH_TYPE = #{fishType},
 		   	   FISH_CONTENT = #{fishContent}
 		 WHERE FISH_NO = #{fishNo}
 	</update>
	
	<update id="deleteFish">
 		UPDATE FISH
 		   SET FISH_STATUS = 'N'
 	 	 WHERE FISH_NO = #{fishNo}
 	</update>
	
</mapper>